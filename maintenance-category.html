<!DOCTYPE html>

<html
  lang="en"
  class="light-style layout-navbar-fixed layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  data-assets-path="./assets/"
  data-template="vertical-menu-template"
>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />

    <title>Dashboard - MTC Engineering</title>

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/x-icon"
      href="./assets/img/favicon/favicon.ico"
    />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link
      rel="stylesheet"
      href="./assets/vendor/fonts/materialdesignicons.css"
    />
    <link rel="stylesheet" href="./assets/vendor/fonts/fontawesome.css" />

    <!-- Core CSS -->
    <link
      rel="stylesheet"
      href="./assets/vendor/css/rtl/core.css"
      class="template-customizer-core-css"
    />
    <link
      rel="stylesheet"
      href="./assets/vendor/css/rtl/theme-default.css"
      class="template-customizer-theme-css"
    />
    <link rel="stylesheet" href="./assets/css/custom.css" />

    <!-- Vendors CSS -->
    <link
      rel="stylesheet"
      href="./assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css"
    />
    <link
      rel="stylesheet"
      href="./assets/vendor/libs/node-waves/node-waves.css"
    />
    <link
      rel="stylesheet"
      href="./assets/vendor/libs/typeahead-js/typeahead.css"
    />
    <link
      rel="stylesheet"
      href="./assets/vendor/libs/datatables-bs5/datatables.bootstrap5.css"
    />
    <link
      rel="stylesheet"
      href="./assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css"
    />
    <link
      rel="stylesheet"
      href="./assets/vendor/libs/flatpickr/flatpickr.css"
    />
    <link
      rel="stylesheet"
      href="./assets/vendor/libs/datatables-buttons-bs5/buttons.bootstrap5.css"
    />
    <link
      rel="stylesheet"
      href="./assets/vendor/libs/datatables-checkboxes-jquery/datatables.checkboxes.css"
    />
    <link rel="stylesheet" href="./assets/vendor/libs/select2/select2.css" />

    <!-- Page CSS -->
    <!-- <link rel="stylesheet" href="./assets/vendor/css/pages/core-theme.css" /> -->

    <!-- Helpers -->
    <script src="./assets/vendor/js/helpers.js"></script>

    <script src="./assets/vendor/js/template-customizer.js"></script>
    <script src="./assets/js/config.js"></script>
  </head>

  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Menu -->

        <aside
          id="layout-menu"
          class="layout-menu menu-vertical menu bg-menu-theme"
        >
          <div class="app-brand demo">
            <a href="./dashboard.html" class="app-brand-link">
              <span class="app-brand-text demo menu-text fw-bold ms-2"
                >App MTC</span
              >
            </a>

            <a
              href="javascript:void(0);"
              class="layout-menu-toggle menu-link text-large ms-auto"
            >
              <svg
                width="22"
                height="22"
                viewbox="0 0 22 22"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M11.4854 4.88844C11.0081 4.41121 10.2344 4.41121 9.75715 4.88844L4.51028 10.1353C4.03297 10.6126 4.03297 11.3865 4.51028 11.8638L9.75715 17.1107C10.2344 17.5879 11.0081 17.5879 11.4854 17.1107C11.9626 16.6334 11.9626 15.8597 11.4854 15.3824L7.96672 11.8638C7.48942 11.3865 7.48942 10.6126 7.96672 10.1353L11.4854 6.61667C11.9626 6.13943 11.9626 5.36568 11.4854 4.88844Z"
                  fill="currentColor"
                  fill-opacity="0.6"
                ></path>
                <path
                  d="M15.8683 4.88844L10.6214 10.1353C10.1441 10.6126 10.1441 11.3865 10.6214 11.8638L15.8683 17.1107C16.3455 17.5879 17.1192 17.5879 17.5965 17.1107C18.0737 16.6334 18.0737 15.8597 17.5965 15.3824L14.0778 11.8638C13.6005 11.3865 13.6005 10.6126 14.0778 10.1353L17.5965 6.61667C18.0737 6.13943 18.0737 5.36568 17.5965 4.88844C17.1192 4.41121 16.3455 4.41121 15.8683 4.88844Z"
                  fill="currentColor"
                  fill-opacity="0.38"
                ></path>
              </svg>
            </a>
          </div>

          <div class="menu-inner-shadow"></div>

          <ul class="menu-inner py-1">
            <!-- Dashboards -->
            <!-- <li class="menu-item">
              <a href="./dashboard.html" class="menu-link">
                <i class="menu-icon tf-icons mdi mdi-home-outline"></i>
                <div data-i18n="Dashboard">Dashboard</div>
              </a>
            </li> -->

            <!-- Master Data -->
            <li class="menu-header fw-light mt-4">
              <span class="menu-header-text">Engineering MTC</span>
            </li>
            <li class="menu-item active open" style="">
              <a
                href="javascript:void(0);"
                class="menu-link menu-toggle waves-effect"
              >
                <i class="menu-icon tf-icons mdi mdi-file-document-outline"></i>
                <div data-i18n="MTC Setup">MTC Setup</div>
              </a>
              <ul class="menu-sub">
                <li class="menu-item">
                  <a href="./mtc-task.html" class="menu-link">
                    <div data-i18n="MTC Task">MTC Task</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="./mtc-template.html" class="menu-link">
                    <div data-i18n="MTC Template">
                      MTC Template
                    </div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="./asset-readiness.html" class="menu-link">
                    <div data-i18n="Asset Readiness">Asset Readiness</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="./location-readiness.html" class="menu-link">
                    <div data-i18n="Location Readiness">Location Readiness</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="./asset-meter-update.html" class="menu-link">
                    <div data-i18n="Asset Meter Update">Asset Meter Update</div>
                  </a>
                </li>
              </ul>
            </li>
            <li class="menu-item">
              <a href="./dispatcher-center.html" class="menu-link">
                <i class="menu-icon tf-icons mdi mdi-clipboard-account-outline"></i>
                <div data-i18n="Dispatcher Center">Dispatcher Center</div>
                <i class="mdi mdi-alert-circle ms-2 text-warning"></i>
              </a>
            </li>
            <li class="menu-item">
              <a href="./schedule-task.html" class="menu-link">
                <i class="menu-icon tf-icons mdi mdi-calendar-badge-outline"></i>
                <div data-i18n="Work List">Work List</div>
              </a>
            </li>
            <li class="menu-item">
              <a href="./preventive-work-orders.html" class="menu-link">
                <i class="menu-icon tf-icons mdi mdi-progress-wrench"></i>
                <div data-i18n="Preventive Work Order">Preventive Work Order</div>
              </a>
            </li>
            <li class="menu-item">
              <a href="./corrective-work-order.html" class="menu-link">
                <i class="menu-icon tf-icons mdi mdi-wrench-outline"></i>
                <div data-i18n="Corrective Work Order">Corrective Work Order</div>
              </a>
            </li>
            <li class="menu-item">
              <a href="./discrepancy-report.html" class="menu-link">
                <i class="menu-icon tf-icons mdi mdi-finance"></i>
                <div data-i18n="Discrepancy Report">Discrepancy Report</div>
              </a>
            </li>
            <li class="menu-item">
              <a href="./mtc-setting.html" class="menu-link">
                <i class="menu-icon tf-icons mdi mdi-cog-outline"></i>
                <div data-i18n="MTC Setting">MTC Setting</div>
              </a>
            </li>
            <div class="">             
              <li class="menu-header fw-light mt-4">
                <span class="menu-header-text">MASTER DATA MAINTENANCE</span>
              </li>
              <li class="menu-item">
                <a href="./skill-set.html" class="menu-link">
                  <i class="menu-icon tf-icons mdi mdi-briefcase-account-outline"></i>
                  <div data-i18n="Skill Set">Skill Set</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="./engineer.html" class="menu-link">
                  <i class="menu-icon tf-icons mdi mdi-account-hard-hat-outline"></i>
                  <div data-i18n="Engineer">Engineer</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="./vendor.html" class="menu-link">
                  <i class="menu-icon tf-icons mdi mdi-store-outline"></i>
                  <div data-i18n="Vendor">Vendor</div>
                </a>
              </li>
              <li class="menu-item active">
                <a href="./maintenance-category.html" class="menu-link">
                  <i class="menu-icon tf-icons mdi mdi-list-box-outline"></i>
                  <div data-i18n="MTC Category">MTC Category</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="./root-cause-category.html" class="menu-link">
                  <i class="menu-icon tf-icons mdi mdi-list-box-outline"></i>
                  <div data-i18n="Root Cause Category">Root Cause Category</div>
                </a>
              </li>
            </div>
          </ul>
        </aside>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
          <!-- Navbar -->

          <nav
            class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
            id="layout-navbar-fixed"
          >
            <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
              <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                <i class="mdi mdi-menu mdi-24px"></i>
              </a>
            </div>

            <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
              <ul class="navbar-nav flex-row align-items-center ms-auto">
                <!-- User -->
                <li class="nav-item navbar-dropdown dropdown-user dropdown">
                  <a
                    class="nav-link dropdown-toggle hide-arrow"
                    href="javascript:void(0);"
                    data-bs-toggle="dropdown"
                  >
                    <div class="avatar avatar-online">
                      <img src="./assets/img/avatars/1.png" alt="" class="w-px-40 h-auto rounded-circle"/>
                    </div>
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                      <a class="dropdown-item" href="#">
                        <div class="d-flex">
                          <div class="flex-shrink-0 me-3">
                            <div class="avatar avatar-online">
                              <img src="./assets/img/avatars/1.png" alt="" class="w-px-40 h-auto rounded-circle"/>
                            </div>
                          </div>
                          <div class="flex-grow-1">
                            <span class="fw-semibold d-block">John Doe</span>
                            <small class="text-muted">Admin</small>
                          </div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="./index.html" target="_blank">
                        <i class="mdi mdi-logout me-2"></i>
                        <span class="align-middle">Log Out</span>
                      </a>
                    </li>
                  </ul>
                </li>
                <!--/ User -->
              </ul>
            </div>
          </nav>
          <!-- / Navbar -->
          <!-- Content wrapper -->
          <div class="content-wrapper">
            <div class="container-xxl flex-grow-1 container-p-y">
              <div class="d-flex justify-content-between align-items-center mb-4">
                <h4 class="fw-bold mb-0">MTC Category</h4>
              </div>
              
              <div class="card mt-4">
                <div class="row g-3 px-4 py-3 align-items-center">
                  <hr />
                  <div class="col">
                    <div class="d-md-flex d-block g-3 gap-2 align-items-center justify-content-end">
                      <label class="w-100 custom-search-input position-relative">
                        <i class="mdi mdi-24px mdi-magnify position-absolute" style="
                              left: 10px;
                              top: 50%;
                              transform: translateY(-50%);
                              color: #999;
                            "></i>
                        <input type="search" class="form-control form-control-sm ps-4 mb-md-0 mb-3 ml-2"
                          placeholder="Search by name"
                          aria-controls="search datatable" style="padding-left: 2.5rem !important" />
                      </label>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <button type="button" class="btn btn-primary waves-effect waves-light w-100 text-white" data-bs-toggle="modal" data-bs-target="#addRootCauseCategoryModal">
                      + ADD MTC CATEGORY
                    </button>
                  </div>
                </div>
                <hr />
                <div class="card-datatable table-responsive custom-table text-nowrap px-4 pt-3 mb-4">
                  <table class="table card-table table-borderless">
                    <thead>
                    <tr>
                      <th style="min-width: 260px;">MTC CATEGORY</th>
                      <th style="min-width: 260px;">COLOR CODE</th>
                      <th class="text-center">ACTIONS</th>
                    </tr>
                  </thead>
                  <tbody class="table-border-bottom-0">
                    <tr>
                      <td class="pt-3 pb-3">
                        <div class="ps-3">Manusia</div>
                      </td>
                      <td class="pt-3 pb-3">
                        <div class="d-flex align-items-center ">
                          <!-- bulatan warna -->
                          <span style="display:inline-block; width:16px; height:16px; border-radius:50%; background-color:#3C57A1; margin-right:8px;"></span>
                          <!-- kode hex -->
                          <span>#3C57A1</span>
                        </div>
                      </td>
                      <td class="pt-3 pb-3 text-center">
                        <a href="#" style="color: #3C57A1; text-decoration: none;" 
                          data-bs-toggle="modal" data-bs-target="#editRootCauseCategoryModal" 
                          class="edit-modal-btn"
                          data-category="Manusia" 
                          data-root-causes='["Kurangnya pelatihan SOP pengiriman", "Kurang koordinasi"]'>
                          EDIT
                        </a>
                        /
                        <a href="#" style="color: #CA4046; text-decoration: none;"
                          data-bs-toggle="modal" data-bs-target="#deleteRootCauseCategoryModal" 
                          data-category-name="Manusia"
                          class="delete-modal-btn">
                          DELETE
                        </a>
                      </td>
                    </tr>

                    <tr>
                      <td class="pt-3 pb-3">
                        <div class="ps-3">Metode</div>
                      </td>
                      <td class="pt-3 pb-3">
                        <div class="d-flex align-items-center ">
                          <span style="display:inline-block; width:16px; height:16px; border-radius:50%; background-color:#EA9612; margin-right:8px;"></span>
                          <span>#EA9612</span>
                        </div>
                      </td>
                      <td class="pt-3 pb-3 text-center">
                        <a href="#" style="color: #3C57A1; text-decoration: none;" 
                          data-bs-toggle="modal" data-bs-target="#editRootCauseCategoryModal" 
                          class="edit-modal-btn"
                          data-category="Metode" 
                          data-root-causes='["Tidak ada standar waktu", "Salah urutan proses"]'>
                          EDIT
                        </a>
                        /
                        <a href="#" style="color: #CA4046; text-decoration: none;"
                          data-bs-toggle="modal" data-bs-target="#deleteRootCauseCategoryModal" 
                          data-category-name="Metode"
                          class="delete-modal-btn">
                          DELETE
                        </a>
                      </td>
                    </tr>
                  </tbody>
                  </table>
                </div>

                <hr>
                <div class="d-md-flex d-block justify-content-between align-items-center px-4 py-4">
                  <div>Showing 1 to 5 of 5 entries</div>
                  <nav aria-label="Page navigation">
                    <ul class="pagination mb-0">
                      <li class="page-item first">
                        <a class="page-link waves-effect" href="#"><i class="tf-icon mdi mdi-skip-previous-outline mdi-20px"></i></a>
                      </li>
                      <li class="page-item prev">
                        <a class="page-link waves-effect" href="#"><i class="tf-icon mdi mdi-chevron-left mdi-20px"></i></a>
                      </li>
                      <li class="page-item active">
                        <a class="page-link waves-effect" href="#">1</a>
                      </li>
                      <li class="page-item next">
                        <a class="page-link waves-effect" href="#"><i class="tf-icon mdi mdi-chevron-right mdi-20px"></i></a>
                      </li>
                      <li class="page-item last">
                        <a class="page-link waves-effect" href="#"><i class="tf-icon mdi mdi-skip-next-outline mdi-20px"></i></a>
                      </li>
                    </ul>
                  </nav>
                </div>
              </div>
            </div>
          </div>

          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>

      <div class="modal fade" id="addRootCauseCategoryModal" tabindex="-1" aria-labelledby="addRootCauseCategoryModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
          <div class="modal-content border-0">
            <div class="modal-header">
              <h5 class="modal-title" id="addRootCauseCategoryModalLabel">Add MTC Category</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <hr class="mt-3"/>
            <div class="modal-body">
              <div class="row g-3 mb-4">
                <div class="col-12">
                  <div class="form-floating form-floating-outline">
                    <input type="text" class="form-control" id="categoryName" placeholder="Category" />
                    <label for="categoryName">Category *</label>
                  </div>
                </div>
              </div>

              <div class="col-12">
                <div class="position-relative" style="width: 100%;">
                  <div class="form-floating form-floating-outline">
                    <input type="text" 
                          class="form-control" 
                          placeholder="e.g #34567" 
                          id="ribbon-color" 
                          name="ribbon-color" 
                          value="" 
                          style="text-transform: uppercase; padding-right: 50px;">
                    <label for="ribbon-color">Color Code <span class="text-danger">*</span></label>
                  </div>
                  
                  <!-- kotak warna di dalam input -->
                  <input type="color" 
                        id="color_code_color" 
                        name="color_code"
                        value=""
                        style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%);
                                width: 30px; height: 30px; border: none; padding: 0; cursor: pointer;">
                </div>
              </div>

              <hr class="mt-3"/>
            </div>
              
            <div class="modal-footer">
              <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">CANCEL</button>
              <button type="button" class="btn btn-primary">SAVE</button>
            </div>
          </div>
        </div>
      </div>


    <div class="modal fade" id="editRootCauseCategoryModal" tabindex="-1" aria-labelledby="editRootCauseCategoryModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content border-0">
          <div class="modal-header">
            <h5 class="modal-title" id="editRootCauseCategoryModalLabel">Edit MTC Category</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <hr class="mt-3"/>
          <div class="modal-body">
            <div class="row g-3 mb-4">
              <div class="col-12">
                <div class="form-floating form-floating-outline">
                  <input type="text" class="form-control" id="editCategoryName" placeholder="Category" value="Manusia"/>
                  <label for="editCategoryName">Category <span class="text-danger">*</span></label>
                </div>
              </div>
            </div>
            <div class="col-12">
                <div class="position-relative" style="width: 100%;">
                  <div class="form-floating form-floating-outline">
                    <input type="text" 
                          class="form-control" 
                          placeholder="e.g #34567" 
                          id="ribbon-color" 
                          name="ribbon-color" 
                          value="#EA9612" 
                          style="text-transform: uppercase; padding-right: 50px;">
                    <label for="ribbon-color">Color Code <span class="text-danger">*</span></label>
                  </div>
                  
                  <!-- kotak warna di dalam input -->
                  <input type="color" 
                        id="color_code_color" 
                        name="color_code"
                        value="#EA9612"
                        style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%);
                                width: 30px; height: 30px; border: none; padding: 0; cursor: pointer;">
                </div>
              </div>

            <hr class="mt-3"/>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">CANCEL</button>
            <button type="button" class="btn btn-primary">SAVE</button>
          </div>
        </div>
      </div>
    </div>


    <div class="modal fade" id="deleteRootCauseCategoryModal" tabindex="-1" aria-labelledby="deleteRootCauseCategoryModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-md modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="deleteRootCauseCategoryModalLabel">Delete Confirmation</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p class="mb-0">Are you sure you want to delete the mtc category "<strong id="categoryNameToDelete"></strong>" ?</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CANCEL</button>
            <button type="button" class="btn btn-danger">DELETE</button>
          </div>
        </div>
      </div>
    </div>


    </div>
    <!-- / Layout wrapper -->

    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script src="./assets/vendor/libs/jquery/jquery.js"></script>
    <script src="./assets/vendor/libs/popper/popper.js"></script>
    <script src="./assets/vendor/js/bootstrap.js"></script>
    <script src="./assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="./assets/vendor/libs/node-waves/node-waves.js"></script>

    <script src="./assets/vendor/libs/hammer/hammer.js"></script>
    <script src="./assets/vendor/libs/i18n/i18n.js"></script>
    <script src="./assets/vendor/libs/typeahead-js/typeahead.js"></script>
    <script src="./assets/vendor/libs/flatpickr/flatpickr.js"></script>

    <script src="./assets/vendor/js/menu.js"></script>
    <!-- endbuild -->

    <!-- Vendors JS -->
    <script src="./assets/vendor/libs/moment/moment.js"></script>
    <script src="./assets/vendor/libs/datatables-bs5/datatables-bootstrap5.js"></script>
    <script src="./assets/vendor/libs/select2/select2.js"></script>

    <!-- Main JS -->
    <script src="./assets/js/main.js"></script>

    <!-- Page JS -->
    <script>
      $(document).ready(function () {
        $('#skillSet').select2({
          placeholder: $(this).data('placeholder'),
          allowClear: true,
        });
      });

    
        
       document.addEventListener('DOMContentLoaded', function () {
          const addModal = document.getElementById('addRootCauseCategoryModal');
          const editModal = document.getElementById('editRootCauseCategoryModal');

          // --- Functions to create/remove root cause inputs ---
          
          // Fungsi untuk modal ADD
          function createAddRootCauseInput() {
            const div = document.createElement('div');
            div.classList.add('row', 'g-3', 'align-items-center', 'root-cause-item', 'mb-2');
            div.innerHTML = `
              <div class="col-md-11">
                <div class="form-floating form-floating-outline">
                  <input type="text" class="form-control" placeholder="Root Cause" />
                  <label for="newRootCause">Root Cause</label>
                </div>
              </div>
              <div class="col-md-1 text-start">
                <button type="button" class="btn btn-text-danger remove-root-cause px-0">
                  <i class="mdi mdi-24px mdi-trash-can-outline"></i>
                </button>
              </div>
            `;
            div.querySelector('.remove-root-cause').addEventListener('click', function() {
              div.remove();
            });
            return div;
          }

          // FUNGSI UNTUK MODAL EDIT (sekarang benar-benar sama persis dengan Add)
          function createEditRootCauseInput(value = '') {
            const div = document.createElement('div');
            div.classList.add('row', 'g-3', 'align-items-center', 'root-cause-item', 'mb-2');
            div.innerHTML = `
              <div class="col-md-11">
                <div class="form-floating form-floating-outline">
                  <input type="text" class="form-control" placeholder="Root Cause" value="${value}" />
                  <label for="editRootCause">Root Cause</label>
                </div>
              </div>
              <div class="col-md-1 text-start">
                <button type="button" class="btn btn-text-danger remove-root-cause px-0">
                  <i class="mdi mdi-24px mdi-trash-can-outline"></i>
                </button>
              </div>
            `;
            div.querySelector('.remove-root-cause').addEventListener('click', function() {
              div.remove();
            });
            return div;
          }
          
          // --- Event listeners for the ADD modal ---
          if (addModal) {
            const addRootCauseBtn = addModal.querySelector('#addRootCauseBtn');
            const rootCausesContainer = addModal.querySelector('#root-causes-container');
            
            addModal.addEventListener('show.bs.modal', function () {
              // Logic to clear form if needed
            });
            
            if (addRootCauseBtn && rootCausesContainer) {
              addRootCauseBtn.addEventListener('click', function() {
                rootCausesContainer.appendChild(createAddRootCauseInput());
              });
            }
          }

          // --- Event listeners for the EDIT modal ---
          if (editModal) {
            const addEditRootCauseBtn = editModal.querySelector('#addEditRootCauseBtn');
            const editRootCausesContainer = editModal.querySelector('#edit-root-causes-container');
            
            editModal.addEventListener('show.bs.modal', function (event) {
              const button = event.relatedTarget; 
              const category = button.getAttribute('data-category');
              const rootCausesString = button.getAttribute('data-root-causes');
              const rootCauses = JSON.parse(rootCausesString);

              const modalCategoryInput = editModal.querySelector('#editCategoryName');
              
              editRootCausesContainer.innerHTML = '';
              
              modalCategoryInput.value = category;

              rootCauses.forEach(rc => {
                const div = createEditRootCauseInput(rc);
                editRootCausesContainer.appendChild(div);
              });
            });
            
            if (addEditRootCauseBtn && editRootCausesContainer) {
              addEditRootCauseBtn.addEventListener('click', function() {
                editRootCausesContainer.appendChild(createEditRootCauseInput());
              });
            }
          }
          
          // Event listener for initial delete buttons on the page (if any)
          document.querySelectorAll('.remove-root-cause').forEach(btn => {
            btn.addEventListener('click', function() {
              btn.closest('.root-cause-item').remove();
            });
          });
        });


      document.addEventListener('DOMContentLoaded', function () {
        const deleteModal = document.getElementById('deleteRootCauseCategoryModal');

        if (deleteModal) {
          deleteModal.addEventListener('show.bs.modal', function (event) {
            // Tombol yang memicu modal
            const button = event.relatedTarget;
            // Ambil nama kategori dari atribut data-*
            const categoryName = button.getAttribute('data-category-name');
            // Dapatkan elemen strong di dalam modal
            const modalText = deleteModal.querySelector('#categoryNameToDelete');
            // Update teks di dalam modal
            modalText.textContent = categoryName;
          });
        }
      });


      document.addEventListener("DOMContentLoaded", function () {
        flatpickr("#startDate", {
          dateFormat: "d-m-Y",
          allowInput: true
        });
      });

      const colorCodeInput = document.getElementById('ribbon-color');
  const colorPreview = document.getElementById('color_code_color');

  // update preview ketika ketik kode warna
  colorCodeInput.addEventListener('input', function() {
    if(/^#([0-9A-F]{3}){1,2}$/i.test(this.value)) {
      colorPreview.value = this.value;
    }
  });

  // update input text ketika pilih dari color picker
  colorPreview.addEventListener('input', function() {
    colorCodeInput.value = this.value;
  });
    </script>
  </body>
</html>

<!-- beautify ignore:end -->
